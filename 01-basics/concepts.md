## 区块链

一提起区块链，大部分人可能都会默认想起比特币或者虚拟货币，但是他们之间究竟是什么关系呢？区块链
又到底是什么呢？

### 什么是区块链？

首先，区块链是起源于比特币，但不止于比特币，他们之间是个包含关系，比特币是属于区块链的一种，或者
说比特币是区块链的核心支柱，但是区块链还包含了其他的不同的链，是一种更基础的技术概念。

那么区块链到底是什么呢？

根据比特币白皮书 [^btc-paper] 的定义，区块链是一种点对点的电子货币系统。

[^btc-paper]: https://bitcoin.org/bitcoin.pdf

从纯技术的角度来看的话，区块链是一个分布式的数据库。

通俗点来说，区块链就是个去中心化的电子支付账本。

所以说区块链是什么呢？区块链就是个电子支付账本，和现实中银行或者一些能够进行支付的系统一样，
主要的区别在于区块链的这个账本是去中心化的，而其他的支付系统是中心化的，仅此而已。

#### 中心化 V.S. 去中心化

那么什么是中心化，什么又是去中心化呢？

中心化就是被某个特定的组织或者人控制，而去中心化就是不被单个组织或群体控制。这两者有可以大致分为
三类：

- 架构中心化/去中心化：该系统由多少个物理设备组成？系统能在单一时间点容忍多少台设备宕机/离线？
- 政治中心化/去中心化：系统的物理设备是由多少人或者组织能进行控制？
- 逻辑中心化/去中心化：系统中的用户或者设备如果减少对系统是否会有影响？

具体详细的介绍可以阅读 [The meaning of decentralization](https://medium.com/@VitalikButerin/the-meaning-of-decentralization-a0c92b76a274)。

对于区块链来说，哪怕只有一个人用一台电脑运行一个节点软件，整个系统都是能够正常运转的，只不过整个
系统就被这个人控制了，但是一旦有另外一个人运行了相同的节点软件，那么就需要经过两个人一起同意才能
对系统进行控制，所以参与的人越多，单个人/组织对系统的影响和控制就越小，同时少部分人/组织的加入或
推出对整个系统来说并没有什么影响，唯一存在的影响就是需要控制整个系统需要谈判沟通的难度会增加/降低。
所以要相对这个系统就行修改，就必须要超过 51% 的参与者同意，当然，也有中攻击方式叫 **51% 攻击** [^51-percent-attack]。
本质是一样的，少数服从多数。

[^51-percent-attack]: https://www.investopedia.com/terms/1/51-attack.asp

当然，你要是不同意某个修改的话，那你就继续自己运行原有的软件，和你意见一致的人你们也能一起愉快的
玩耍，他们玩他们的，你们玩你们的，这种情况被称为 **硬分叉**。关于[**分叉**](#分叉-fork)这个概念之后会进行讲解。

就本人来说，去中心化最吸引人的特性是：**无许可（Permissionless）**。

> **无许可** 最大的魅力在于，任何人都可以直接参与进来，不需要其他人的同意/许可，只要你有一台手机/电脑，
> 能联网，你安装好对应的软件后就能接入对应的链，不想玩了就直接删掉对应的软件，或者想要换号直接
> 重新创建一个新的[**钱包**](#钱包-wallet)。

除了**无许可**这一特性，去中心化还有一大令人着迷的特性——**无信任（Trustless）**。

所谓的**无信任**，就是你不需要去相信其他人/组织，你可以自己进行检查验证，因为数学是不会骗人的。
所以在区块链中会经常看到: `Do not trust, verify yourself`。至于怎么验证，后面会进行介绍。

当然，去中心化还有其他的一些特性，比如说：**不可篡改**、**透明性**、**安全性** 等。
这些都是基于**无许可**以及**无信任**所衍生出来的。

> **不可篡改**：是给予密码学的哈希算法的不可逆的特性来进行保证的，本质就是**无信任** 的衍生，
> 即哈希算法的不可逆是正确的，那么不可篡改就是正确的。理论上只要是在同一条链上，不可篡改是成立的。
> [The DAO 硬分叉][the-dao] 除外，这是硬分叉了，变成两条链 Ethereum 和 Ethereum Classic，
> 所以在同一条链上不可篡改性是成立的。

> **透明性**：所有的交易记录都是公开了，任何人想要查看随时可以查看。这是**无许可**和**无信任**的结合。

> **安全性**：通过**共识**、**密码学算法**以及**博弈**保证整个系统的安全，如果要攻击整个系统
> 需要花费巨量的成本。如果将能成功攻击成本正常参与进整个系统的话，收益要比攻击获得的收益要高。
> 本质其实还是收益的问题，只要收益比成本高，那么攻击就可能发生。

[the-dao]: https://en.wikipedia.org/wiki/The_DAO

### 共识

区块链中还有一个经常提到的就是共识，何谓共识？就是大家都认可某个规则，这就叫共识。在去中心化的系统中，如果各个节点对数据的正确性看法不一致，那也就没法谈什么无信任了。为了让所有的
节点对数据的真实性保持一致的看法，那么就需要有共识，或者说共识算法，规定什么样的数据是
符合规则的。

目前来说，两大主流的共识算法分别是：

- 以 比特币 Bitcoin 为代表的**工作量证明**（Proof of Work, PoW）
- 以 以太坊 Ethereum 2.0 为代表的**权益证明**（Proof of Stake, PoS）

> 注：Ethereum 2.0 才修改为 PoS 共识，最初的 Ethereum 也是 PoW，所以有一段时间显卡
> 很贵就是被拿去挖以太坊了。所以那时候很多二手显卡大部分都是挖矿淘汰下来的显卡，简称矿卡，
> 被调侃为“锻炼过的卡”。

简单来说，PoW 共识就是多劳多得，你做得多，你就得到的就越多，而 PoS 共识其实是有点马太效应的，
就是越有钱，得到的越多，因为证明你的权益就是需要质押你的资产（ETH），然后才能获得对应的奖励。
就个人来说，还是喜欢 PoW。

PoW 的诟病是浪费能源，因为 PoW 共识挖矿需要消耗大量的算力，而算力是由电来支撑的，电又是由其他
的能源转换过来的。

当然还有一些其他的共识算法，但是用的都不多，个人也觉得不够中心化，比如 Solana 的 Proof of
History (PoH)，Filecoin 的 Proof of Space and Time (PoST)，这些节点的成本都太高，
并不满足 permissionless，毕竟节点是区块链中最重要的一部分了。

### 分叉 {#fork}

分叉就是新的版本的改动和原来的不太兼容，导致最新的区块和之前的区块不一样，
就出现拆分出了两条链，类似于原来一条路在某个点分成了两条路。分叉有两种，一种叫做**软分叉**，一种叫做**硬分叉**。其主要区别在于分叉之后能否在合并回去，软分叉是分叉后又能重新合并会一条链，但是硬分叉是分叉后就无法在合并成一条链，最终由一条链分裂成两条链。

软分叉就像夫妻吵架，但吵归吵，本质内核（共识）还是没变，最终还是能在一起；但硬分叉就不一样，是两者无法兼容了，共识不同，只能分开，从此形同陌路，可谓是道不同，不相为谋。

> 兄弟反目之：BTC 与 BCH
>
> 2017年，比特币社区发生了一场激烈的争论，就像两个兄弟为了家产而反目成仇。
> 比特币的区块太小了，只能容纳有限的交易，导致交易速度慢、费用高。这就像一个小房子，住的人多了就挤得慌。
> 于是就有激进派（代表人物 Roger Ver）提议：
> `我们应该把区块扩大，这样就能容纳更多交易了！这样交易会更快，费用会更低！`
> 但是保守派（代表人物：Bitcoin Core 开发团队）不同意：
> `区块大了不安全，我们应该用其他方法解决！我们可以用更多小区块，或者优化区块布局！`
> 双方谁也没说服谁，于是在2017年8月1日，Bitcoin 就进行了一次硬分叉：激进派创建了新的比特币版本，
> 把区块大小从 1MB 扩大到 8MB，并改名为 **Bitcoin Cash，BCH**；而保守派依然维持区块大小为 1MB。


> 黑客与道德困境：ETH 和 ETC
>
> 2016年，以太坊上有一个叫`The DAO`的智能合约，就像一个去中心化的投资基金。人们可以投资，
> 然后投票决定投资什么项目。6月，一个黑客发现了`The DAO`的漏洞，成功盗取了 360,000 ETH,
> 当时价值约 $50,000,000。这引发了一个深刻的道德问题：是否要回滚交易来追回被盗的损失？
> 如果回滚交易，那么违背了区块链不可篡改的原则，但是不回滚交易的话，损失太严重了。以太坊创始人
> Vitalik Buterin 认为“这是黑客攻击，应该保护用户！区块链应该为人类服务，不是为黑客服务！”
> 所以支持回滚；而有一部分人认为 “code is law“，这是原则问题，如果这次回滚了，
> 那么下次再遇到类似的问题还会回滚，所以不支持回滚。所以硬分叉就产生了：因为大部分人都遭受了损失，
> 所以他们支持回滚，回滚的新版本叫**以太坊（Ethereum， ETH）**，坚守派不接受回滚，
> 依然运行原有的代码，叫做**Ethereum Classic，ETC**。
>
> :bulb: Tip: ETC 有“末日战车”之称，因为好几次牛市转熊市之前 ETC 都会猛涨，所以就戏称 ETC
> 为“末日战车”（不具备投资建议）。

硬分叉的两个经典事件结果是两个网络独立运行，各有自己的代币。证明了区块链的去中心化特性：没有人能强制统一意见。

### 节点


### 链/网络

### 跨链

bridge

### 二层 (Layer2) 与 侧链 (Sidechain)

垂直 和 水平的区别


### 钱包 {#wallet}

钱包对应银行账号

#### 地址

地址对应银行卡号