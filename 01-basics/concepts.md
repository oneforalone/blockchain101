## 区块链 (Blockchain)

一提起区块链，大部分人可能都会默认想起比特币或者虚拟货币，但是他们之间究竟是什么关系呢？区块链
又到底是什么呢？

### 什么是区块链？

首先，区块链是起源于比特币，但不止于比特币，他们之间是个包含关系，比特币是属于区块链的一种，或者
说比特币是区块链的核心支柱，但是区块链还包含了其他的不同的链，是一种更基础的技术概念。

那么区块链到底是什么呢？

根据比特币白皮书 [^btc-paper] 的定义，区块链是一种点对点的电子货币系统。

[^btc-paper]: https://bitcoin.org/bitcoin.pdf

从纯技术的角度来看的话，区块链是一个分布式的数据库。

通俗点来说，区块链就是个去中心化的电子支付账本。

所以说区块链是什么呢？区块链就是个电子支付账本，和现实中银行或者一些能够进行支付的系统一样，
主要的区别在于区块链的这个账本是去中心化的，而其他的支付系统是中心化的，仅此而已。

#### 中心化 (Centralization) V.S. 去中心化 (Decentralization)

那么什么是中心化，什么又是去中心化呢？

中心化就是被某个特定的组织或者人控制，而去中心化就是不被单个组织或群体控制。这两者有可以大致分为
三类：

- 架构中心化/去中心化：该系统由多少个物理设备组成？系统能在单一时间点容忍多少台设备宕机/离线？
- 政治中心化/去中心化：系统的物理设备是由多少人或者组织能进行控制？
- 逻辑中心化/去中心化：系统中的用户或者设备如果减少对系统是否会有影响？

具体详细的介绍可以阅读 [The meaning of decentralization](https://medium.com/@VitalikButerin/the-meaning-of-decentralization-a0c92b76a274)。

对于区块链来说，哪怕只有一个人用一台电脑运行一个节点软件，整个系统都是能够正常运转的，只不过整个
系统就被这个人控制了，但是一旦有另外一个人运行了相同的节点软件，那么就需要经过两个人一起同意才能
对系统进行控制，所以参与的人越多，单个人/组织对系统的影响和控制就越小，同时少部分人/组织的加入或
推出对整个系统来说并没有什么影响，唯一存在的影响就是需要控制整个系统需要谈判沟通的难度会增加/降低。
所以要相对这个系统就行修改，就必须要超过 51% 的参与者同意，当然，也有中攻击方式叫 **51% 攻击** [^51-percent-attack]。
本质是一样的，少数服从多数。

[^51-percent-attack]: https://www.investopedia.com/terms/1/51-attack.asp

当然，你要是不同意某个修改的话，那你就继续自己运行原有的软件，和你意见一致的人你们也能一起愉快的
玩耍，他们玩他们的，你们玩你们的，这种情况被称为 **硬分叉 (Hard Fork)**。关于[**分叉**](#分叉-fork-fork)这个概念之后会进行讲解。

就本人来说，去中心化最吸引人的特性是：**无许可（Permissionless）**。

> **无许可** 最大的魅力在于，任何人都可以直接参与进来，不需要其他人的同意/许可，只要你有一台手机/电脑，
> 能联网，你安装好对应的软件后就能接入对应的链，不想玩了就直接删掉对应的软件，或者想要换号直接
> 重新创建一个新的[**钱包**](#钱包-wallet-wallet)。

除了**无许可**这一特性，去中心化还有一大令人着迷的特性——**无信任（Trustless）**。

所谓的**无信任**，就是你不需要去相信其他人/组织，你可以自己进行检查验证，因为数学是不会骗人的。
所以在区块链中会经常看到: `Do not trust, verify yourself`。至于怎么验证，后面会进行介绍。

当然，去中心化还有其他的一些特性，比如说：**不可篡改**、**透明性**、**安全性** 等。
这些都是基于**无许可**以及**无信任**所衍生出来的。

> **不可篡改**：是给予密码学的哈希算法的不可逆的特性来进行保证的，本质就是**无信任** 的衍生，
> 即哈希算法的不可逆是正确的，那么不可篡改就是正确的。理论上只要是在同一条链上，不可篡改是成立的。
> [The DAO 硬分叉][the-dao] 除外，这是硬分叉了，变成两条链 Ethereum 和 Ethereum Classic，
> 所以在同一条链上不可篡改性是成立的。

> **透明性**：所有的交易记录都是公开了，任何人想要查看随时可以查看。这是**无许可**和**无信任**的结合。

> **安全性**：通过**共识**、**密码学算法**以及**博弈**保证整个系统的安全，如果要攻击整个系统
> 需要花费巨量的成本。如果将能成功攻击成本正常参与进整个系统的话，收益要比攻击获得的收益要高。
> 本质其实还是收益的问题，只要收益比成本高，那么攻击就可能发生。

[the-dao]: https://en.wikipedia.org/wiki/The_DAO

### 共识 (Consensus)

区块链中还有一个经常提到的就是共识，何谓共识？就是大家都认可某个规则，这就叫共识。在去中心化的系统中，如果各个节点对数据的正确性看法不一致，那也就没法谈什么无信任了。为了让所有的
节点对数据的真实性保持一致的看法，那么就需要有共识，或者说共识算法，规定什么样的数据是
符合规则的。

目前来说，两大主流的共识算法分别是：

- 以 比特币 Bitcoin 为代表的**工作量证明**（Proof of Work, PoW）
- 以 以太坊 Ethereum 2.0 为代表的**权益证明**（Proof of Stake, PoS）

> 注：Ethereum 2.0 才修改为 PoS 共识，最初的 Ethereum 也是 PoW，所以有一段时间显卡
> 很贵就是被拿去挖以太坊了。所以那时候很多二手显卡大部分都是挖矿淘汰下来的显卡，简称矿卡，
> 被调侃为“锻炼过的卡”。

简单来说，PoW 共识就是多劳多得，你做得多，你就得到的就越多，而 PoS 共识其实是有点马太效应的，
就是越有钱，得到的越多，因为证明你的权益就是需要质押你的资产（ETH），然后才能获得对应的奖励。
就个人来说，还是喜欢 PoW。

PoW 的诟病是浪费能源，因为 PoW 共识挖矿需要消耗大量的算力，而算力是由电来支撑的，电又是由其他
的能源转换过来的。

当然还有一些其他的共识算法，但是用的都不多，个人也觉得不够中心化，比如 Solana 的 Proof of
History (PoH)，Filecoin 的 Proof of Space and Time (PoST)，这些节点的成本都太高，
并不满足 permissionless，毕竟节点是区块链中最重要的一部分了。

### 分叉 (Fork) {#fork}

分叉就是新的版本的改动和原来的不太兼容，导致最新的区块和之前的区块不一样，
就出现拆分出了两条链，类似于原来一条路在某个点分成了两条路。分叉有两种，一种叫做**软分叉 (Soft Fork)**，
一种叫做**硬分叉 (Hard Fork)**。其主要区别在于分叉之后能否在合并回去，软分叉是分叉后
又能重新合并会一条链，但是硬分叉是分叉后就无法在合并成一条链，最终由一条链分裂成两条链。

软分叉就像夫妻吵架，但吵归吵，本质内核（共识）还是没变，最终还是能在一起；但硬分叉就不一样，
是两者无法兼容了，共识不同，只能分开，从此形同陌路，可谓是道不同，不相为谋。

> 兄弟反目之：BTC 与 BCH
>
> 2017年，比特币社区发生了一场激烈的争论，就像两个兄弟为了家产而反目成仇。
> 比特币的区块太小了，只能容纳有限的交易，导致交易速度慢、费用高。这就像一个小房子，住的人多了就挤得慌。
> 于是就有激进派（代表人物 Roger Ver）提议：
> `我们应该把区块扩大，这样就能容纳更多交易了！这样交易会更快，费用会更低！`
> 但是保守派（代表人物：Bitcoin Core 开发团队）不同意：
> `区块大了不安全，我们应该用其他方法解决！我们可以用更多小区块，或者优化区块布局！`
> 双方谁也没说服谁，于是在2017年8月1日，Bitcoin 就进行了一次硬分叉：激进派创建了新的比特币版本，
> 把区块大小从 1MB 扩大到 8MB，并改名为 **Bitcoin Cash，BCH**；而保守派依然维持区块大小为 1MB。


> 黑客与道德困境：ETH 和 ETC
>
> 2016年，以太坊上有一个叫`The DAO`的智能合约，就像一个去中心化的投资基金。人们可以投资，
> 然后投票决定投资什么项目。6月，一个黑客发现了`The DAO`的漏洞，成功盗取了 360,000 ETH,
> 当时价值约 $50,000,000。这引发了一个深刻的道德问题：是否要回滚交易来追回被盗的损失？
> 如果回滚交易，那么违背了区块链不可篡改的原则，但是不回滚交易的话，损失太严重了。以太坊创始人
> Vitalik Buterin 认为“这是黑客攻击，应该保护用户！区块链应该为人类服务，不是为黑客服务！”
> 所以支持回滚；而有一部分人认为 “code is law“，这是原则问题，如果这次回滚了，
> 那么下次再遇到类似的问题还会回滚，所以不支持回滚。所以硬分叉就产生了：因为大部分人都遭受了损失，
> 所以他们支持回滚，回滚的新版本叫**以太坊（Ethereum， ETH）**，坚守派不接受回滚，
> 依然运行原有的代码，叫做**Ethereum Classic，ETC**。
>
> :bulb: Tip: ETC 有“末日战车”之称，因为好几次牛市转熊市之前 ETC 都会猛涨，所以就戏称 ETC
> 为“末日战车”（不具备投资建议）。

硬分叉的两个经典事件结果是两个网络独立运行，各有自己的代币。证明了区块链的去中心化特性：没有人能强制统一意见。

### 节点 (Node)

所谓节点是什么呢？节点本质就是一个软件，负责存储验证以及传播的区块链中的交易数据。节点一般分为
两类：

- **全节点 (Full Node)**：存储了所有区块数据
- **轻节点 (Light Node)**：存储最新的区块数据

不论是**全节点**和**轻节点**，都会对新的区块数据进行验证以及传播出去，唯一的区别就是全节点有
所有的数据，而轻节点只保存最新的部分数据，所以从安全性来说，全节点更能保证数据的准确性，而轻节点
主要是因为设备受限，无法运行全节点，但是需要与其他节点进行交互，那么只能牺牲一部分安全性来保证可
以在一些配置低的设备上运行，比如手机平板之类的，这些设备无法存储大量的数据。

正常来说，**全节点** 的数据量会比较大，以比特币来说，截止到目前（2025-10-19）这个时间点的话，
一个全节点所需要的磁盘空间大概是在 800 GiB 左右，以太坊的话是要有 2 TiB 左右。

从节点的角度来看，比特币是最去中心化的，现有的家用电脑都可以运行一个全节点（同步时间大概一周左右），
主要的成本就是硬盘，甚至是一个树莓派都能跑一个全节点，只不过同步的速度比较慢。其次是以太坊，虽然
以太坊的节点成本会比比特币的要高，但是一般来说只是跑一个全节点来查看数据的话，大部分人也能承担的
起，Solana 的全节点就纯粹是大公司才能负担的，中小型的公司直接使用第三方节点供应商（即节点的云服务商），
按需付费即可，不用自己跑全节点，因为 Solana 全节点一个月的成本大概是在 $8,000。

### 链/网络 (Chain/Network)

目前来说，区块链不止是比特币，主流的是比特币、以太坊、Solana。还有一些 MEME 币，如 DOGE、PEPE
之类的。那么这些到底是什么呢？

> MEME：可以看作是一种梗或者流行文化，其本身没有任何实用价值。

> DOGE：狗狗币，创建之初是为了嘲讽比特币，说比特币本身没有任何价值，创始人就是简单的将比特币复制一下，
> 然后修改一下名字和代币的总发行量，就发了个狗狗币。发行没多久创始人就将他自己手上的币都卖掉买了辆车，
> 但是没想到后来社区将这个币给玩起来了，再加上马斯克经常的奶这个币，导致狗币翻了上千倍。

> PEPE：青蛙币，衍生于国外的青蛙表情。官网：https://www.pepe.vip/


通俗来说，可以将不同的链类比为不同的银行，比特币有点类似央行的角色，但是比特币的数量是有限的，
总量就是 21,000,000 枚，挖完就没有了，所以比特币会有“数字黄金”一说。然后以太坊和 Solana 之类的
可以看作是其他的银行，不同的银行之间的运作是不一样的，相互独立，互不影响。目前现存的连有上百条，
主要还是以太坊的生态技术为主，即大多数都是兼容以太坊的 EVM，这部分链又叫做 EVM-ecosystem，其
地址格式是一样的。

#### 跨链 (Cross-Chain)

既然有很多链，而且这些链又是相互独立的，那么想要将资产在不同的链上进行转移该怎么办呢？这时候就需要
引入**跨链桥**了，所谓的跨链桥，其本质就是将你在 A 链上的资产销毁，然后再在 B 链上进行铸造，这就
完成了跨链，类似跨行转账一样，跨链手续费都会比较高，因为相当于是执行了两笔交易。

#### 二层 (Layer2) 与侧链 (Side Chain)

因为区块大小的限制，导致最开始的交易速度比较慢，随着用户的数量不断增加，就需要更高的处理速度，
但是基于现有框架的限制，导致以太坊无法将交易速度提升，于是就有人尝试开始基于以太坊将交易速度提升。
于是就有了两种解决方案：

- 侧链（Side Chain）
- 二层（Layer2）

侧链和 Layer2 的本质都是先在一条比较快的链上执行交易，然后定期将这条快的链上的交易打包放到那主链
上执行，这样安全和速度都有了保证，安全由主链进行保证，速度由快的链保证。类似高速和快速路之类的概念。
侧链和 Layer2 的区别在于一个是水平一个是垂直的。所谓的水平和垂直是相对于主链。

那么如何解释水平和垂直呢？所谓的水平，其实就是不依赖于主链，单独执行，同时可以和主链进行交互，这就是
侧链，代表的链 Polygon，以太坊的侧链。至于垂直，就是基于主链，在主链之上执行，也能和主链进行交互，
代表的是 Arbitrum / Optimize 等一系列 Layer2 链。

Layer 2 和 侧链都解决了主链上网络拥堵以及手续费贵的问题，同时也带来了更好的用户体验。

### 钱包 (Wallet) {#wallet}

如果说节点是区块链的核心骨干，那么钱包就是区块链的终端入口。有了钱包，任何人都能进入区块链进行
交互。可以将钱包类比为手机上的手机银行 app，区别在于手机银行一个人在一家银行只能注册一个账号，
而钱包是可以在一条链上生成/注册多个账号。

钱包本质也是一个软件，它既可以和节点软件是同一个（如 Bitcoin Core），也可以独立于节点，但是需要
配置节点的链接。

钱包又有多种分类，按照制作的类型可以分为**软件钱包**和**硬件钱包**，根据是否联网可分为**冷钱包**
和**热钱包**。

区分其实也很简单，**软件钱包** 就是你在电脑或者手机上下载安装的钱包软件，**硬件钱包**
就是专门的硬件制作的钱包，需要单独购买，一般来说硬件钱包的成本要比软件的高，普通的硬件钱包一般的
价格是在 $100 左右。

**冷钱包**和**热钱包** 更加好区分，它们的区别就是是否联网，联网的就叫热钱包，不联网的就叫冷钱包。
所以冷热钱包是可以进行转换的，一台有钱包的设备，不联网时它就叫冷钱包，连上网就叫热钱包。安全上来说
肯定是冷钱包比热钱包要安全，毕竟联网的话很容易被钓鱼或者中毒。冷钱包主要是存放大资金，毕竟交易所
都不可靠，而且 "Not your key, not your coin"。所以大资金的话还是放到冷钱包比较好。

同时软件/硬件钱包和冷/热钱包之间并不是互不兼容，只是分类不一样，一般来说软件钱包大部分都是热钱包，
毕竟软件钱包都是安装到电脑或者手机上，不过也可以将安装好的手机或电脑不联网，这样软件钱包就变成冷钱包了。
同理，硬件钱包也能在冷、热钱包之间切换。


#### 地址 (Address)

如果说钱包是银行账号的话，那么地址对应的就是银行卡，一个钱包可以有多个地址，一个银行账号也可以有
多张卡。区别是地址是不需要密码，而是要用私钥进行签名才能转账。这个用到的是非对称加密算法，地址是
公钥，可以随意给别人看，但是只有掌握了私钥，才能证明这个地址是你的。当然，如果你的私钥泄露了，那么
这个别人也能对这个地址进行操作，其实和你泄露丢了银行卡并泄露了密码一样，别人可以直接去 atm 上取走
你卡里的钱，同样，私钥被别人拿走后别人就能将你这个地址里的所有资产走转走。
